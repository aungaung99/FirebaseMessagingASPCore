import{registerVersion,_registerComponent,_getProvider,getApp,SDK_VERSION}from"https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";function isIndexedDBAvailable(){return"object"==typeof indexedDB}function validateIndexedDBOpenable(){return new Promise((t,r)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var e;r((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(e){r(e)}})}const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var r=t[0]||{},t=`${this.service}/${e}`,e=this.errors[e],e=e?replaceTemplate(e,r):"Error",e=`${this.serviceName}: ${e} (${t}).`;return new FirebaseError(t,e,r)}}function replaceTemplate(e,n){return e.replace(PATTERN,(e,t)=>{var r=n[t];return null!=r?String(r):`<${t}?>`})}const PATTERN=/\{\$([^}]+)}/g,DEFAULT_INTERVAL_MILLIS=1e3,DEFAULT_BACKOFF_FACTOR=2,MAX_VALUE_MILLIS=144e5,RANDOM_FACTOR=.5;function calculateBackoffMillis(e,t=DEFAULT_INTERVAL_MILLIS,r=DEFAULT_BACKOFF_FACTOR){r=t*Math.pow(r,e),e=Math.round(RANDOM_FACTOR*r*(Math.random()-.5)*2);return Math.min(MAX_VALUE_MILLIS,r+e)}function getModularInstance(e){return e&&e._delegate?e._delegate:e}class Component{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}var LogLevel;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(LogLevel=LogLevel||{});const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(e,t,...r)=>{if(!(t<e.logLevel)){var n=(new Date).toISOString(),a=ConsoleMethod[t];if(!a)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[a](`[${n}]  ${e.name}:`,...r)}};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}function toArray(e){return Array.prototype.slice.call(e)}function promisifyRequest(r){return new Promise(function(e,t){r.onsuccess=function(){e(r.result)},r.onerror=function(){t(r.error)}})}function promisifyRequestCall(r,n,a){var o,e=new Promise(function(e,t){promisifyRequest(o=r[n].apply(r,a)).then(e,t)});return e.request=o,e}function promisifyCursorRequestCall(e,t,r){var n=promisifyRequestCall(e,t,r);return n.then(function(e){if(e)return new Cursor(e,n.request)})}function proxyProperties(e,r,t){t.forEach(function(t){Object.defineProperty(e.prototype,t,{get:function(){return this[r][t]},set:function(e){this[r][t]=e}})})}function proxyRequestMethods(t,r,n,e){e.forEach(function(e){e in n.prototype&&(t.prototype[e]=function(){return promisifyRequestCall(this[r],e,arguments)})})}function proxyMethods(t,r,n,e){e.forEach(function(e){e in n.prototype&&(t.prototype[e]=function(){return this[r][e].apply(this[r],arguments)})})}function proxyCursorRequestMethods(t,r,n,e){e.forEach(function(e){e in n.prototype&&(t.prototype[e]=function(){return promisifyCursorRequestCall(this[r],e,arguments)})})}function Index(e){this._index=e}function Cursor(e,t){this._cursor=e,this._request=t}function ObjectStore(e){this._store=e}function Transaction(r){this._tx=r,this.complete=new Promise(function(e,t){r.oncomplete=function(){e()},r.onerror=function(){t(r.error)},r.onabort=function(){t(r.error)}})}function UpgradeDB(e,t,r){this._db=e,this.oldVersion=t,this.transaction=new Transaction(r)}function DB(e){this._db=e}function openDb(e,t,r){var t=promisifyRequestCall(indexedDB,"open",[e,t]),n=t.request;return n&&(n.onupgradeneeded=function(e){r&&r(new UpgradeDB(n.result,e.oldVersion,n.transaction))}),t.then(function(e){return new DB(e)})}proxyProperties(Index,"_index",["name","keyPath","multiEntry","unique"]),proxyRequestMethods(Index,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),proxyCursorRequestMethods(Index,"_index",IDBIndex,["openCursor","openKeyCursor"]),proxyProperties(Cursor,"_cursor",["direction","key","primaryKey","value"]),proxyRequestMethods(Cursor,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(r){r in IDBCursor.prototype&&(Cursor.prototype[r]=function(){var t=this,e=arguments;return Promise.resolve().then(function(){return t._cursor[r].apply(t._cursor,e),promisifyRequest(t._request).then(function(e){if(e)return new Cursor(e,t._request)})})})}),ObjectStore.prototype.createIndex=function(){return new Index(this._store.createIndex.apply(this._store,arguments))},ObjectStore.prototype.index=function(){return new Index(this._store.index.apply(this._store,arguments))},proxyProperties(ObjectStore,"_store",["name","keyPath","indexNames","autoIncrement"]),proxyRequestMethods(ObjectStore,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),proxyCursorRequestMethods(ObjectStore,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),proxyMethods(ObjectStore,"_store",IDBObjectStore,["deleteIndex"]),Transaction.prototype.objectStore=function(){return new ObjectStore(this._tx.objectStore.apply(this._tx,arguments))},proxyProperties(Transaction,"_tx",["objectStoreNames","mode"]),proxyMethods(Transaction,"_tx",IDBTransaction,["abort"]),UpgradeDB.prototype.createObjectStore=function(){return new ObjectStore(this._db.createObjectStore.apply(this._db,arguments))},proxyProperties(UpgradeDB,"_db",["name","version","objectStoreNames"]),proxyMethods(UpgradeDB,"_db",IDBDatabase,["deleteObjectStore","close"]),DB.prototype.transaction=function(){return new Transaction(this._db.transaction.apply(this._db,arguments))},proxyProperties(DB,"_db",["name","version","objectStoreNames"]),proxyMethods(DB,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(a){[ObjectStore,Index].forEach(function(e){a in e.prototype&&(e.prototype[a.replace("open","iterate")]=function(){var e=toArray(arguments),t=e[e.length-1],r=this._store||this._index,n=r[a].apply(r,e.slice(0,-1));n.onsuccess=function(){t(n.result)}})})}),[Index,ObjectStore].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,r){var n=this,a=[];return new Promise(function(t){n.iterateCursor(e,function(e){e?(a.push(e.value),void 0===r||a.length!=r?e.continue():t(a)):t(a)})})})});const name$1="@firebase/installations",version$1="0.5.5",PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION=`w:${version$1}`,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=36e5,SERVICE="installations",SERVICE_NAME="Installations",ERROR_DESCRIPTION_MAP$1={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ERROR_FACTORY$1=new ErrorFactory(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP$1);function isServerError(e){return e instanceof FirebaseError&&e.code.includes("request-failed")}function getInstallationsEndpoint({projectId:e}){return`${INSTALLATIONS_API_URL}/projects/${e}/installations`}function extractAuthTokenInfoFromResponse(e){return{token:e.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(e.expiresIn),creationTime:Date.now()}}async function getErrorFromResponse(e,t){t=(await t.json()).error;return ERROR_FACTORY$1.create("request-failed",{requestName:e,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})}function getHeaders({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function getHeadersWithAuth(e,{refreshToken:t}){const r=getHeaders(e);return r.append("Authorization",getAuthorizationHeader(t)),r}async function retryIfServerError(e){var t=await e();return 500<=t.status&&t.status<600?e():t}function getExpiresInFromResponseExpiresIn(e){return Number(e.replace("s","000"))}function getAuthorizationHeader(e){return`${INTERNAL_AUTH_VERSION} ${e}`}async function createInstallationRequest(e,{fid:t}){const r=getInstallationsEndpoint(e);var n=getHeaders(e),e={fid:t,authVersion:INTERNAL_AUTH_VERSION,appId:e.appId,sdkVersion:PACKAGE_VERSION};const a={method:"POST",headers:n,body:JSON.stringify(e)},o=await retryIfServerError(()=>fetch(r,a));if(o.ok){e=await o.json();return{fid:e.fid||t,registrationStatus:2,refreshToken:e.refreshToken,authToken:extractAuthTokenInfoFromResponse(e.authToken)}}throw await getErrorFromResponse("Create Installation",o)}function sleep(t){return new Promise(e=>{setTimeout(e,t)})}function bufferToBase64UrlSafe(e){const t=btoa(String.fromCharCode(...e));return t.replace(/\+/g,"-").replace(/\//g,"_")}const VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{const t=new Uint8Array(17),r=self.crypto||self.msCrypto;r.getRandomValues(t),t[0]=112+t[0]%16;var e=encode(t);return VALID_FID_PATTERN.test(e)?e:INVALID_FID}catch(e){return INVALID_FID}}function encode(e){const t=bufferToBase64UrlSafe(e);return t.substr(0,22)}function getKey(e){return`${e.appName}!${e.appId}`}const fidChangeCallbacks=new Map;function fidChanged(e,t){e=getKey(e);callFidChangeCallbacks(e,t),broadcastFidChange(e,t)}function callFidChangeCallbacks(e,t){e=fidChangeCallbacks.get(e);if(e)for(const r of e)r(t)}function broadcastFidChange(e,t){const r=getBroadcastChannel();r&&r.postMessage({key:e,fid:t}),closeBroadcastChannel()}let broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&(broadcastChannel=new BroadcastChannel("[Firebase] FID Change"),broadcastChannel.onmessage=e=>{callFidChangeCallbacks(e.data.key,e.data.fid)}),broadcastChannel}function closeBroadcastChannel(){0===fidChangeCallbacks.size&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}const DATABASE_NAME="firebase-installations-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-installations-store";let dbPromise=null;function getDbPromise(){return dbPromise=dbPromise||openDb(DATABASE_NAME,DATABASE_VERSION,e=>{0===e.oldVersion&&e.createObjectStore(OBJECT_STORE_NAME)}),dbPromise}async function set(e,t){var r=getKey(e);const n=await getDbPromise(),a=n.transaction(OBJECT_STORE_NAME,"readwrite"),o=a.objectStore(OBJECT_STORE_NAME);var s=await o.get(r);return await o.put(t,r),await a.complete,s&&s.fid===t.fid||fidChanged(e,t.fid),t}async function remove(e){e=getKey(e);const t=await getDbPromise(),r=t.transaction(OBJECT_STORE_NAME,"readwrite");await r.objectStore(OBJECT_STORE_NAME).delete(e),await r.complete}async function update(e,t){var r=getKey(e);const n=await getDbPromise(),a=n.transaction(OBJECT_STORE_NAME,"readwrite"),o=a.objectStore(OBJECT_STORE_NAME);var s=await o.get(r),t=t(s);return void 0===t?await o.delete(r):await o.put(t,r),await a.complete,!t||s&&s.fid===t.fid||fidChanged(e,t.fid),t}async function getInstallationEntry(t){let r;var e=await update(t,e=>{e=updateOrCreateInstallationEntry(e),e=triggerRegistrationIfNecessary(t,e);return r=e.registrationPromise,e.installationEntry});return e.fid===INVALID_FID?{installationEntry:await r}:{installationEntry:e,registrationPromise:r}}function updateOrCreateInstallationEntry(e){return clearTimedOutRequest(e||{fid:generateFid(),registrationStatus:0})}function triggerRegistrationIfNecessary(e,t){if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:waitUntilFidRegistration(e)}:{installationEntry:t};if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(ERROR_FACTORY$1.create("app-offline"))};t={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:t,registrationPromise:registerInstallation(e,t)}}async function registerInstallation(t,r){try{return set(t,await createInstallationRequest(t,r))}catch(e){throw isServerError(e)&&409===e.customData.serverCode?await remove(t):await set(t,{fid:r.fid,registrationStatus:0}),e}}async function waitUntilFidRegistration(e){let t=await updateInstallationRequest(e);for(;1===t.registrationStatus;)await sleep(100),t=await updateInstallationRequest(e);if(0!==t.registrationStatus)return t;var{installationEntry:r,registrationPromise:n}=await getInstallationEntry(e);return n||r}function updateInstallationRequest(e){return update(e,e=>{if(!e)throw ERROR_FACTORY$1.create("installation-not-found");return clearTimedOutRequest(e)})}function clearTimedOutRequest(e){return hasInstallationRequestTimedOut(e)?{fid:e.fid,registrationStatus:0}:e}function hasInstallationRequestTimedOut(e){return 1===e.registrationStatus&&e.registrationTime+PENDING_TIMEOUT_MS<Date.now()}async function generateAuthTokenRequest({appConfig:e,platformLoggerProvider:t},r){const n=getGenerateAuthTokenEndpoint(e,r),a=getHeadersWithAuth(e,r),o=t.getImmediate({optional:!0});o&&a.append("x-firebase-client",o.getPlatformInfoString());t={installation:{sdkVersion:PACKAGE_VERSION}};const s={method:"POST",headers:a,body:JSON.stringify(t)},i=await retryIfServerError(()=>fetch(n,s));if(i.ok)return extractAuthTokenInfoFromResponse(await i.json());throw await getErrorFromResponse("Generate Auth Token",i)}function getGenerateAuthTokenEndpoint(e,{fid:t}){return`${getInstallationsEndpoint(e)}/${t}/authTokens:generate`}async function refreshAuthToken(r,n=!1){let a;var e=await update(r.appConfig,e=>{if(!isEntryRegistered(e))throw ERROR_FACTORY$1.create("not-registered");var t=e.authToken;if(!n&&isAuthTokenValid(t))return e;if(1===t.requestStatus)return a=waitUntilAuthTokenRequest(r,n),e;if(!navigator.onLine)throw ERROR_FACTORY$1.create("app-offline");e=makeAuthTokenRequestInProgressEntry(e);return a=fetchAuthTokenFromServer(r,e),e});return a?await a:e.authToken}async function waitUntilAuthTokenRequest(e,t){let r=await updateAuthTokenRequest(e.appConfig);for(;1===r.authToken.requestStatus;)await sleep(100),r=await updateAuthTokenRequest(e.appConfig);var n=r.authToken;return 0===n.requestStatus?refreshAuthToken(e,t):n}function updateAuthTokenRequest(e){return update(e,e=>{if(!isEntryRegistered(e))throw ERROR_FACTORY$1.create("not-registered");return hasAuthTokenRequestTimedOut(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function fetchAuthTokenFromServer(t,r){try{var e=await generateAuthTokenRequest(t,r),n=Object.assign(Object.assign({},r),{authToken:e});return await set(t.appConfig,n),e}catch(e){throw!isServerError(e)||401!==e.customData.serverCode&&404!==e.customData.serverCode?(r=Object.assign(Object.assign({},r),{authToken:{requestStatus:0}}),await set(t.appConfig,r)):await remove(t.appConfig),e}}function isEntryRegistered(e){return void 0!==e&&2===e.registrationStatus}function isAuthTokenValid(e){return 2===e.requestStatus&&!isAuthTokenExpired(e)}function isAuthTokenExpired(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function hasAuthTokenRequestTimedOut(e){return 1===e.requestStatus&&e.requestTime+PENDING_TIMEOUT_MS<Date.now()}async function getId(e){const{installationEntry:t,registrationPromise:r}=await getInstallationEntry(e.appConfig);return(r||refreshAuthToken(e)).catch(console.error),t.fid}async function getToken(e,t=!1){return await completeInstallationRegistration(e.appConfig),(await refreshAuthToken(e,t)).token}async function completeInstallationRegistration(e){var e=(await getInstallationEntry(e))["registrationPromise"];e&&await e}function extractAppConfig(e){if(!e||!e.options)throw getMissingValueError("App Configuration");if(!e.name)throw getMissingValueError("App Name");for(const t of["projectId","apiKey","appId"])if(!e.options[t])throw getMissingValueError(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function getMissingValueError(e){return ERROR_FACTORY$1.create("missing-app-config-values",{valueName:e})}const INSTALLATIONS_NAME="installations",INSTALLATIONS_NAME_INTERNAL="installations-internal",publicFactory=e=>{e=e.getProvider("app").getImmediate();return{app:e,appConfig:extractAppConfig(e),platformLoggerProvider:_getProvider(e,"platform-logger"),_delete:()=>Promise.resolve()}},internalFactory=e=>{e=e.getProvider("app").getImmediate();const t=_getProvider(e,INSTALLATIONS_NAME).getImmediate();return{getId:()=>getId(t),getToken:e=>getToken(t,e)}};function registerInstallations(){_registerComponent(new Component(INSTALLATIONS_NAME,publicFactory,"PUBLIC")),_registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL,internalFactory,"PRIVATE"))}registerInstallations(),registerVersion(name$1,version$1),registerVersion(name$1,version$1,"esm2017");const name="@firebase/remote-config",version="0.3.4";class RemoteConfigAbortSignal{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}const RC_COMPONENT_NAME="remote-config",ERROR_DESCRIPTION_MAP={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},ERROR_FACTORY=new ErrorFactory("remoteconfig","Remote Config",ERROR_DESCRIPTION_MAP);function hasErrorCode(e,t){return e instanceof FirebaseError&&-1!==e.code.indexOf(t)}const DEFAULT_VALUE_FOR_BOOLEAN=!1,DEFAULT_VALUE_FOR_STRING="",DEFAULT_VALUE_FOR_NUMBER=0,BOOLEAN_TRUTHY_VALUES=["1","true","t","yes","y","on"];class Value{constructor(e,t=DEFAULT_VALUE_FOR_STRING){this._source=e,this._value=t}asString(){return this._value}asBoolean(){return"static"===this._source?DEFAULT_VALUE_FOR_BOOLEAN:0<=BOOLEAN_TRUTHY_VALUES.indexOf(this._value.toLowerCase())}asNumber(){if("static"===this._source)return DEFAULT_VALUE_FOR_NUMBER;let e=Number(this._value);return isNaN(e)&&(e=DEFAULT_VALUE_FOR_NUMBER),e}getSource(){return this._source}}function getRemoteConfig(e=getApp()){e=getModularInstance(e);const t=_getProvider(e,RC_COMPONENT_NAME);return t.getImmediate()}async function activate(e){const t=getModularInstance(e);var[r,e]=await Promise.all([t._storage.getLastSuccessfulFetchResponse(),t._storage.getActiveConfigEtag()]);return!!(r&&r.config&&r.eTag&&r.eTag!==e)&&(await Promise.all([t._storageCache.setActiveConfig(r.config),t._storage.setActiveConfigEtag(r.eTag)]),!0)}function ensureInitialized(e){const t=getModularInstance(e);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0})),t._initializePromise}async function fetchConfig(t){const r=getModularInstance(t),e=new RemoteConfigAbortSignal;setTimeout(async()=>{e.abort()},r.settings.fetchTimeoutMillis);try{await r._client.fetch({cacheMaxAgeMillis:r.settings.minimumFetchIntervalMillis,signal:e}),await r._storageCache.setLastFetchStatus("success")}catch(e){t=hasErrorCode(e,"fetch-throttle")?"throttle":"failure";throw await r._storageCache.setLastFetchStatus(t),e}}function getAll(r){const e=getModularInstance(r);return getAllKeys(e._storageCache.getActiveConfig(),e.defaultConfig).reduce((e,t)=>(e[t]=getValue(r,t),e),{})}function getBoolean(e,t){return getValue(getModularInstance(e),t).asBoolean()}function getNumber(e,t){return getValue(getModularInstance(e),t).asNumber()}function getString(e,t){return getValue(getModularInstance(e),t).asString()}function getValue(e,t){const r=getModularInstance(e);r._isInitializationComplete||r._logger.debug(`A value was requested for key "${t}" before SDK initialization completed.`+" Await on ensureInitialized if the intent was to get a previously activated value.");e=r._storageCache.getActiveConfig();return e&&void 0!==e[t]?new Value("remote",e[t]):r.defaultConfig&&void 0!==r.defaultConfig[t]?new Value("default",String(r.defaultConfig[t])):(r._logger.debug(`Returning static value for key "${t}".`+" Define a default or remote value if this is unintentional."),new Value("static"))}function setLogLevel(e,t){const r=getModularInstance(e);switch(t){case"debug":r._logger.logLevel=LogLevel.DEBUG;break;case"silent":r._logger.logLevel=LogLevel.SILENT;break;default:r._logger.logLevel=LogLevel.ERROR}}function getAllKeys(e={},t={}){return Object.keys(Object.assign(Object.assign({},e),t))}class CachingClient{constructor(e,t,r,n){this.client=e,this.storage=t,this.storageCache=r,this.logger=n}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-t,t=r<=e;return this.logger.debug("Config fetch cache check."+` Cache age millis: ${r}.`+` Cache max age millis (minimumFetchIntervalMillis setting): ${e}.`+` Is cache hit: ${t}.`),t}async fetch(e){var[t,r]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;e=await this.client.fetch(e);const n=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===e.status&&n.push(this.storage.setLastSuccessfulFetchResponse(e)),await Promise.all(n),e}}function getUserLanguage(e=navigator){return e.languages&&e.languages[0]||e.language}class RestClient{constructor(e,t,r,n,a,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=n,this.apiKey=a,this.appId=o}async fetch(r){var[e,t]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),n=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":r.eTag||"*"},t={sdk_version:this.sdkVersion,app_instance_id:e,app_instance_id_token:t,app_id:this.appId,language_code:getUserLanguage()},t={method:"POST",headers:a,body:JSON.stringify(t)},n=fetch(n,t),t=new Promise((e,t)=>{r.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",t(e)})});let o;try{await Promise.race([n,t]),o=await n}catch(e){let t="fetch-client-network";throw"AbortError"===e.name&&(t="fetch-timeout"),ERROR_FACTORY.create(t,{originalErrorMessage:e.message})}let s=o.status;n=o.headers.get("ETag")||void 0;let i,c;if(200===o.status){let e;try{e=await o.json()}catch(e){throw ERROR_FACTORY.create("fetch-client-parse",{originalErrorMessage:e.message})}i=e.entries,c=e.state}if("INSTANCE_STATE_UNSPECIFIED"===c?s=500:"NO_CHANGE"===c?s=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(i={}),304!==s&&200!==s)throw ERROR_FACTORY.create("fetch-status",{httpStatus:s});return{status:s,eTag:n,config:i}}}function setAbortableTimeout(a,o){return new Promise((e,t)=>{var r=Math.max(o-Date.now(),0);const n=setTimeout(e,r);a.addEventListener(()=>{clearTimeout(n),t(ERROR_FACTORY.create("fetch-throttle",{throttleEndTimeMillis:o}))})})}function isRetriableError(e){if(!(e instanceof FirebaseError&&e.customData))return!1;e=Number(e.customData.httpStatus);return 429===e||500===e||503===e||504===e}class RetryingClient{constructor(e,t){this.client=e,this.storage=t}async fetch(e){var t=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)}async attemptFetch(t,{throttleEndTimeMillis:e,backoffCount:r}){await setAbortableTimeout(t.signal,e);try{var n=await this.client.fetch(t);return await this.storage.deleteThrottleMetadata(),n}catch(e){if(!isRetriableError(e))throw e;r={throttleEndTimeMillis:Date.now()+calculateBackoffMillis(r),backoffCount:r+1};return await this.storage.setThrottleMetadata(r),this.attemptFetch(t,r)}}}const DEFAULT_FETCH_TIMEOUT_MILLIS=6e4,DEFAULT_CACHE_MAX_AGE_MILLIS=432e5;class RemoteConfig{constructor(e,t,r,n,a){this.app=e,this._client=t,this._storageCache=r,this._storage=n,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:DEFAULT_FETCH_TIMEOUT_MILLIS,minimumFetchIntervalMillis:DEFAULT_CACHE_MAX_AGE_MILLIS},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function toFirebaseError(e,t){e=e.target.error||void 0;return ERROR_FACTORY.create(t,{originalErrorMessage:e&&e.message})}const APP_NAMESPACE_STORE="app_namespace_store",DB_NAME="firebase_remote_config",DB_VERSION=1;function openDatabase(){return new Promise((t,r)=>{try{const e=indexedDB.open(DB_NAME,DB_VERSION);e.onerror=e=>{r(toFirebaseError(e,"storage-open"))},e.onsuccess=e=>{t(e.target.result)},e.onupgradeneeded=e=>{const t=e.target.result;0===e.oldVersion&&t.createObjectStore(APP_NAMESPACE_STORE,{keyPath:"compositeKey"})}}catch(e){r(ERROR_FACTORY.create("storage-open",{originalErrorMessage:e}))}})}class Storage{constructor(e,t,r,n=openDatabase()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=n}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(s){const i=await this.openDbPromise;return new Promise((t,r)=>{const e=i.transaction([APP_NAMESPACE_STORE],"readonly"),n=e.objectStore(APP_NAMESPACE_STORE);var a=this.createCompositeKey(s);try{const o=n.get(a);o.onerror=e=>{r(toFirebaseError(e,"storage-get"))},o.onsuccess=e=>{e=e.target.result;t(e?e.value:void 0)}}catch(e){r(ERROR_FACTORY.create("storage-get",{originalErrorMessage:e&&e.message}))}})}async set(s,i){const c=await this.openDbPromise;return new Promise((e,t)=>{const r=c.transaction([APP_NAMESPACE_STORE],"readwrite"),n=r.objectStore(APP_NAMESPACE_STORE);var a=this.createCompositeKey(s);try{const o=n.put({compositeKey:a,value:i});o.onerror=e=>{t(toFirebaseError(e,"storage-set"))},o.onsuccess=()=>{e()}}catch(e){t(ERROR_FACTORY.create("storage-set",{originalErrorMessage:e&&e.message}))}})}async delete(s){const i=await this.openDbPromise;return new Promise((e,t)=>{const r=i.transaction([APP_NAMESPACE_STORE],"readwrite"),n=r.objectStore(APP_NAMESPACE_STORE);var a=this.createCompositeKey(s);try{const o=n.delete(a);o.onerror=e=>{t(toFirebaseError(e,"storage-delete"))},o.onsuccess=()=>{e()}}catch(e){t(ERROR_FACTORY.create("storage-delete",{originalErrorMessage:e&&e.message}))}})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class StorageCache{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){var e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),e=await e;e&&(this.lastFetchStatus=e);t=await t;t&&(this.lastSuccessfulFetchTimestampMillis=t);r=await r;r&&(this.activeConfig=r)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function registerRemoteConfig(){_registerComponent(new Component(RC_COMPONENT_NAME,function(e,{instanceIdentifier:t}){var r=e.getProvider("app").getImmediate(),n=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ERROR_FACTORY.create("registration-window");if(!isIndexedDBAvailable())throw ERROR_FACTORY.create("indexed-db-unavailable");var{projectId:a,apiKey:o,appId:e}=r.options;if(!a)throw ERROR_FACTORY.create("registration-project-id");if(!o)throw ERROR_FACTORY.create("registration-api-key");if(!e)throw ERROR_FACTORY.create("registration-app-id");t=t||"firebase";const s=new Storage(e,r.name,t),i=new StorageCache(s),c=new Logger(name);c.logLevel=LogLevel.ERROR;e=new RestClient(n,SDK_VERSION,t,a,o,e),e=new RetryingClient(e,s),e=new CachingClient(e,s,i,c),e=new RemoteConfig(r,e,i,s,c);return ensureInitialized(e),e},"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version),registerVersion(name,version,"esm2017")}async function fetchAndActivate(e){return await fetchConfig(e=getModularInstance(e)),activate(e)}async function isSupported(){if(!isIndexedDBAvailable())return!1;try{return await validateIndexedDBOpenable()}catch(e){return!1}}registerRemoteConfig();export{activate,ensureInitialized,fetchAndActivate,fetchConfig,getAll,getBoolean,getNumber,getRemoteConfig,getString,getValue,isSupported,setLogLevel};